<!DOCTYPE HTML>
<html>

<body>
	<input id="number" type="number" min="0" max="1024" placeholder="Input a number" />
	<button id="random" type="button">Random</button>
	<p>Before the script...</p>
	<canvas id="canvas" width="300" height="300"></canvas>


	<script src="animate_functions.js"></script>
	<script>
		drawFloor(floor, 'canvas');

		function drawFloor(floor, canvasId) {
			var canvas = document.getElementById(canvasId);
			var slotMap = new Image();
			slotMap.src = floor.mapImage.url;

			slotMap.onload = function () {
				canvas.width = slotMap.width;
				canvas.height = slotMap.height;
				console.log("image loaded", slotMap.width, slotMap.height);
			}

			window.requestAnimationFrame(draw);
			function draw() {
				var ctx = canvas.getContext('2d');
				ctx.globalCompositeOperation = 'destination-over';
				ctx.clearRect(0, 0, canvas.width, canvas.height); // clear canvas
				drawPatch(canvas, floor.parkingPatches, floor.mapImage);
				ctx.drawImage(slotMap, 0, 0);
				window.requestAnimationFrame(draw);
			}
		}
	</script>

	<p>...After the script.</p>

</body>

</html>